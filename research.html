<!-- Add this to research.html where you left off -->
<script>
    // Continue the ResearchLibrary class...

    renderPagination() {
        const totalPages = Math.ceil(this.filteredPapers.length / this.itemsPerPage);
        const pagination = document.getElementById('pagination');
        
        if (totalPages <= 1) {
            pagination.innerHTML = '';
            return;
        }
        
        let paginationHTML = `
            <button class="page-btn prev" ${this.currentPage === 1 ? 'disabled' : ''}>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
        `;
        
        // Show page numbers
        for (let i = 1; i <= totalPages; i++) {
            if (i === 1 || i === totalPages || (i >= this.currentPage - 1 && i <= this.currentPage + 1)) {
                paginationHTML += `
                    <button class="page-btn ${i === this.currentPage ? 'active' : ''}" data-page="${i}">
                        ${i}
                    </button>
                `;
            } else if (i === this.currentPage - 2 || i === this.currentPage + 2) {
                paginationHTML += `<span class="page-dots">...</span>`;
            }
        }
        
        paginationHTML += `
            <button class="page-btn next" ${this.currentPage === totalPages ? 'disabled' : ''}>
                Next <i class="fas fa-chevron-right"></i>
            </button>
        `;
        
        pagination.innerHTML = paginationHTML;
        
        // Attach event listeners
        pagination.querySelectorAll('.page-btn').forEach(btn => {
            if (!btn.hasAttribute('disabled') && !btn.classList.contains('active')) {
                btn.addEventListener('click', (e) => {
                    if (e.target.classList.contains('prev')) {
                        this.currentPage--;
                    } else if (e.target.classList.contains('next')) {
                        this.currentPage++;
                    } else {
                        this.currentPage = parseInt(e.target.dataset.page);
                    }
                    this.renderPapersGrid();
                    this.updateResultsCount();
                    window.scrollTo({ top: document.querySelector('.papers-section').offsetTop - 100, behavior: 'smooth' });
                });
            }
        });
    }
    
    setupEventListeners() {
        // View toggle
        document.getElementById('viewSelect').addEventListener('change', (e) => {
            this.currentView = e.target.value;
            this.renderPapersGrid();
        });
        
        // Category cards
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const category = e.currentTarget.dataset.category;
                this.currentCategory = category;
                document.getElementById('categoryFilter').value = category;
                this.applyFilters();
            });
        });
        
        // Search
        document.getElementById('searchButton').addEventListener('click', () => {
            this.applyFilters();
        });
        
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                this.applyFilters();
            }
        });
        
        // Advanced search toggle
        document.getElementById('advancedSearchToggle').addEventListener('click', () => {
            const advancedSearch = document.getElementById('advancedSearch');
            advancedSearch.style.display = advancedSearch.style.display === 'block' ? 'none' : 'block';
        });
        
        // Filter buttons
        document.getElementById('applyFilters').addEventListener('click', () => {
            this.applyFilters();
        });
        
        document.getElementById('resetFilters').addEventListener('click', () => {
            this.resetFilters();
        });
        
        // Submit paper button
        document.getElementById('submitPaperBtn').addEventListener('click', () => {
            this.showSubmitForm();
        });
        
        // Citation generator
        document.getElementById('generateCitation').addEventListener('click', () => {
            this.generateCitation();
        });
        
        // Copy citation buttons
        document.querySelectorAll('.copy-citation').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const citation = e.target.closest('.citation-format').querySelector('.citation-example p').textContent;
                this.copyToClipboard(citation);
            });
        });
        
        // Download buttons (will be attached after rendering)
    }
    
    setupSearch() {
        // Initialize search functionality
        const searchInput = document.getElementById('searchInput');
        let searchTimeout;
        
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                if (e.target.value.length >= 3 || e.target.value.length === 0) {
                    this.applyFilters();
                }
            }, 500);
        });
    }
    
    applyFilters() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const category = document.getElementById('categoryFilter').value;
        const year = document.getElementById('yearFilter').value;
        const journal = document.getElementById('journalFilter').value;
        const sortBy = document.getElementById('sortBy').value;
        
        this.filteredPapers = this.papers.filter(paper => {
            // Search term filter
            if (searchTerm && !this.paperMatchesSearch(paper, searchTerm)) {
                return false;
            }
            
            // Category filter
            if (category !== 'all' && paper.category !== category) {
                return false;
            }
            
            // Year filter
            if (year !== 'all') {
                if (year === '2020' && paper.year > 2020) {
                    return false;
                } else if (paper.year.toString() !== year) {
                    return false;
                }
            }
            
            // Journal filter
            if (journal !== 'all' && !paper.journal.toLowerCase().includes(journal.toLowerCase())) {
                return false;
            }
            
            return true;
        });
        
        // Sort papers
        this.sortPapers(sortBy);
        
        // Reset to first page
        this.currentPage = 1;
        
        // Update display
        this.renderPapersGrid();
        this.updateResultsCount();
    }
    
    paperMatchesSearch(paper, searchTerm) {
        const searchFields = [
            paper.title,
            paper.authors.join(' '),
            paper.journal,
            paper.abstract,
            paper.tags.join(' ')
        ].join(' ').toLowerCase();
        
        return searchFields.includes(searchTerm);
    }
    
    sortPapers(sortBy) {
        switch(sortBy) {
            case 'recent':
                this.filteredPapers.sort((a, b) => b.year - a.year);
                break;
            case 'cited':
                this.filteredPapers.sort((a, b) => b.citations - a.citations);
                break;
            case 'title':
                this.filteredPapers.sort((a, b) => a.title.localeCompare(b.title));
                break;
            case 'relevance':
                // For relevance, we keep the current order (search relevance already applied)
                break;
        }
    }
    
    resetFilters() {
        document.getElementById('searchInput').value = '';
        document.getElementById('categoryFilter').value = 'all';
        document.getElementById('yearFilter').value = 'all';
        document.getElementById('journalFilter').value = 'all';
        document.getElementById('sortBy').value = 'recent';
        
        this.currentCategory = 'all';
        this.applyFilters();
    }
    
    resetSearch() {
        this.resetFilters();
    }
    
    updateResultsCount() {
        const countElement = document.getElementById('resultsCount');
        const total = this.filteredPapers.length;
        const start = (this.currentPage - 1) * this.itemsPerPage + 1;
        const end = Math.min(start + this.itemsPerPage - 1, total);
        
        if (total === 0) {
            countElement.textContent = 'No papers found';
        } else {
            countElement.textContent = `Showing ${start}-${end} of ${total} papers`;
        }
    }
    
    attachPaperEventListeners() {
        // Download buttons
        document.querySelectorAll('.download-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const paperId = parseInt(e.target.closest('[data-id]').dataset.id);
                this.downloadPaper(paperId);
            });
        });
        
        // Cite buttons
        document.querySelectorAll('.cite-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const paperId = parseInt(e.target.closest('[data-id]').dataset.id);
                this.showCitationModal(paperId);
            });
        });
        
        // Bookmark buttons
        document.querySelectorAll('.bookmark-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const paperId = parseInt(e.target.closest('[data-id]').dataset.id);
                this.toggleBookmark(paperId, e.target);
            });
        });
        
        // Paper cards click
        document.querySelectorAll('.paper-card, .paper-list-item').forEach(card => {
            card.addEventListener('click', (e) => {
                if (!e.target.closest('button')) {
                    const paperId = parseInt(card.dataset.id);
                    this.showPaperDetails(paperId);
                }
            });
        });
    }
    
    downloadPaper(paperId) {
        const paper = this.papers.find(p => p.id === paperId);
        if (!paper) return;
        
        // Simulate download
        const content = `Title: ${paper.title}\nAuthors: ${paper.authors.join(', ')}\nYear: ${paper.year}\nJournal: ${paper.journal}\nDOI: ${paper.doi || 'Not available'}\n\nAbstract:\n${paper.abstract}\n\nThis is a simulated download for demonstration purposes.`;
        
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `cocoa-paper-${paperId}.txt`;
        a.click();
        URL.revokeObjectURL(url);
        
        // Update download count (in simulation)
        paper.downloads++;
        this.showNotification(`Downloading "${paper.title}"`, 'success');
    }
    
    showCitationModal(paperId) {
        const paper = this.papers.find(p => p.id === paperId);
        if (!paper) return;
        
        const apa = this.generateAPACitation(paper);
        const chicago = this.generateChicagoCitation(paper);
        const mla = this.generateMLACitation(paper);
        
        const modalHTML = `
            <div class="citation-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Citation for: ${paper.title}</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="citation-format">
                            <h4>APA Format</h4>
                            <div class="citation-text">
                                <p>${apa}</p>
                            </div>
                            <button class="btn btn-secondary btn-sm copy-btn" data-citation="${apa}">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="citation-format">
                            <h4>Chicago Format</h4>
                            <div class="citation-text">
                                <p>${chicago}</p>
                            </div>
                            <button class="btn btn-secondary btn-sm copy-btn" data-citation="${chicago}">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="citation-format">
                            <h4>MLA Format</h4>
                            <div class="citation-text">
                                <p>${mla}</p>
                            </div>
                            <button class="btn btn-secondary btn-sm copy-btn" data-citation="${mla}">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        const modal = document.createElement('div');
        modal.innerHTML = modalHTML;
        document.body.appendChild(modal.firstElementChild);
        
        // Add event listeners
        modal.querySelector('.modal-close').addEventListener('click', () => {
            document.querySelector('.citation-modal').remove();
        });
        
        modal.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const citation = e.target.dataset.citation;
                this.copyToClipboard(citation);
            });
        });
        
        // Close on background click
        modal.querySelector('.citation-modal').addEventListener('click', (e) => {
            if (e.target.classList.contains('citation-modal')) {
                e.target.remove();
            }
        });
    }
    
    generateAPACitation(paper) {
        const authors = paper.authors.map(author => {
            const parts = author.split(' ');
            const lastName = parts[parts.length - 1];
            const initials = parts.slice(0, -1).map(name => name[0] + '.').join('');
            return `${lastName}, ${initials}`;
        }).join(', ');
        
        return `${authors} (${paper.year}). ${paper.title}. <em>${paper.journal}</em>.`;
    }
    
    generateChicagoCitation(paper) {
        const firstAuthor = paper.authors[0];
        const otherAuthors = paper.authors.slice(1);
        
        let authorsStr = firstAuthor;
        if (otherAuthors.length === 1) {
            authorsStr += ` and ${otherAuthors[0]}`;
        } else if (otherAuthors.length > 1) {
            authorsStr += ` et al.`;
        }
        
        return `${authorsStr}. "${paper.title}." <em>${paper.journal}</em> (${paper.year}).`;
    }
    
    generateMLACitation(paper) {
        const firstAuthor = paper.authors[0];
        const otherAuthors = paper.authors.slice(1);
        
        let authorsStr = firstAuthor;
        if (otherAuthors.length > 0) {
            authorsStr += ` et al.`;
        }
        
        return `${authorsStr}. "${paper.title}." <em>${paper.journal}</em>, ${paper.year}.`;
    }
    
    copyToClipboard(text) {
        navigator.clipboard.writeText(text.replace(/<[^>]*>/g, ''))
            .then(() => {
                this.showNotification('Citation copied to clipboard!', 'success');
            })
            .catch(err => {
                console.error('Failed to copy: ', err);
                this.showNotification('Failed to copy citation', 'error');
            });
    }
    
    toggleBookmark(paperId, button) {
        const icon = button.querySelector('i');
        const isBookmarked = icon.classList.contains('fas');
        
        if (isBookmarked) {
            icon.classList.remove('fas');
            icon.classList.add('far');
            this.showNotification('Paper removed from bookmarks', 'info');
        } else {
            icon.classList.remove('far');
            icon.classList.add('fas');
            this.showNotification('Paper added to bookmarks', 'success');
        }
    }
    
    showPaperDetails(paperId) {
        const paper = this.papers.find(p => p.id === paperId);
        if (!paper) return;
        
        const modalHTML = `
            <div class="paper-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${paper.title}</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="paper-details">
                            <div class="detail-section">
                                <h4>Authors</h4>
                                <p>${paper.authors.join(', ')}</p>
                            </div>
                            <div class="detail-section">
                                <h4>Publication Details</h4>
                                <p><strong>Journal:</strong> ${paper.journal}</p>
                                <p><strong>Year:</strong> ${paper.year}</p>
                                <p><strong>Pages:</strong> ${paper.pages}</p>
                                ${paper.doi ? `<p><strong>DOI:</strong> ${paper.doi}</p>` : ''}
                            </div>
                            <div class="detail-section">
                                <h4>Abstract</h4>
                                <p>${paper.abstract}</p>
                            </div>
                            <div class="detail-section">
                                <h4>Keywords</h4>
                                <div class="tags">
                                    ${paper.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                                </div>
                            </div>
                            <div class="detail-section">
                                <h4>Metrics</h4>
                                <div class="metrics">
                                    <span class="metric">
                                        <i class="fas fa-quote-left"></i>
                                        ${paper.citations} citations
                                    </span>
                                    <span class="metric">
                                        <i class="fas fa-download"></i>
                                        ${paper.downloads} downloads
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary download-modal-btn" data-id="${paper.id}">
                            <i class="fas fa-file-pdf"></i> Download PDF
                        </button>
                        <button class="btn btn-secondary cite-modal-btn" data-id="${paper.id}">
                            <i class="fas fa-quote-right"></i> Generate Citation
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        const modal = document.createElement('div');
        modal.innerHTML = modalHTML;
        document.body.appendChild(modal.firstElementChild);
        
        // Add event listeners
        modal.querySelector('.modal-close').addEventListener('click', () => {
            document.querySelector('.paper-modal').remove();
        });
        
        modal.querySelector('.download-modal-btn').addEventListener('click', () => {
            this.downloadPaper(paperId);
        });
        
        modal.querySelector('.cite-modal-btn').addEventListener('click', () => {
            document.querySelector('.paper-modal').remove();
            this.showCitationModal(paperId);
        });
        
        // Close on background click
        modal.querySelector('.paper-modal').addEventListener('click', (e) => {
            if (e.target.classList.contains('paper-modal')) {
                e.target.remove();
            }
        });
    }
    
    showSubmitForm() {
        const formHTML = `
            <div class="submit-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Submit Research Paper</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>This feature is currently in development. For now, please email your submission to:</p>
                        <p class="email-address">research@cocoa-derivatives-lab.gh</p>
                        <div class="requirements">
                            <h4>Submission Requirements:</h4>
                            <ul>
                                <li>PDF format only</li>
                                <li>Maximum 50 pages</li>
                                <li>Include abstract (max 250 words)</li>
                                <li>All authors must be listed</li>
                                <li>Include DOI if available</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary close-modal-btn">Close</button>
                    </div>
                </div>
            </div>
        `;
        
        const modal = document.createElement('div');
        modal.innerHTML = formHTML;
        document.body.appendChild(modal.firstElementChild);
        
        // Add event listeners
        modal.querySelector('.modal-close').addEventListener('click', () => {
            document.querySelector('.submit-modal').remove();
        });
        
        modal.querySelector('.close-modal-btn').addEventListener('click', () => {
            document.querySelector('.submit-modal').remove();
        });
        
        // Close on background click
        modal.querySelector('.submit-modal').addEventListener('click', (e) => {
            if (e.target.classList.contains('submit-modal')) {
                e.target.remove();
            }
        });
    }
    
    generateCitation() {
        const author = document.getElementById('authorInput').value;
        const title = document.getElementById('titleInput').value;
        const journal = document.getElementById('journalInput').value;
        const year = document.getElementById('yearInput').value;
        
        if (!author || !title || !journal || !year) {
            this.showNotification('Please fill in all fields', 'error');
            return;
        }
        
        const apa = `${author} (${year}). ${title}. <em>${journal}</em>.`;
        const chicago = `${author}. "${title}." <em>${journal}</em> (${year}).`;
        const mla = `${author}. "${title}." <em>${journal}</em>, ${year}.`;
        
        const output = document.getElementById('citationOutput');
        output.innerHTML = `
            <h4>Generated Citations:</h4>
            <div class="citation-result">
                <strong>APA:</strong> ${apa}
            </div>
            <div class="citation-result">
                <strong>Chicago:</strong> ${chicago}
            </div>
            <div class="citation-result">
                <strong>MLA:</strong> ${mla}
            </div>
            <button class="btn btn-secondary btn-sm mt-2 copy-all-btn">
                <i class="fas fa-copy"></i> Copy All
            </button>
        `;
        
        // Add copy all button listener
        output.querySelector('.copy-all-btn').addEventListener('click', () => {
            const allCitations = `APA: ${apa}\nChicago: ${chicago}\nMLA: ${mla}`;
            this.copyToClipboard(allCitations.replace(/<[^>]*>/g, ''));
        });
    }
    
    initializeCharts() {
        // Downloads chart
        const ctx = document.getElementById('downloadsChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Downloads',
                    data: [85, 92, 78, 105, 120, 145, 132, 156, 189, 210, 198, 215],
                    borderColor: '#006B3F',
                    backgroundColor: 'rgba(0, 107, 63, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Downloads'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    }
                }
            }
        });
    }
    
    showNotification(message, type = 'info') {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `research-notification ${type}`;
        notification.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
            <span>${message}</span>
        `;
        
        document.body.appendChild(notification);
        
        // Remove after 3 seconds
        setTimeout(() => {
            notification.classList.add('fade-out');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
}

// Initialize research library when page loads
document.addEventListener('DOMContentLoaded', () => {
    new ResearchLibrary();
});
</script>

<style>
/* Research-specific styles */
.research-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--space-xl) var(--space);
}

.research-header {
    background: linear-gradient(135deg, var(--primary), #00704a);
    border-radius: var(--radius-xl);
    padding: var(--space-2xl);
    margin-bottom: var(--space-xl);
    color: white;
    text-align: center;
}

.research-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-xl);
    margin-top: var(--space-xl);
    flex-wrap: wrap;
}

.stat-card {
    background: rgba(255, 255, 255, 0.1);
    padding: var(--space);
    border-radius: var(--radius);
    min-width: 120px;
    text-align: center;
}

.stat-card .stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--secondary);
    margin-bottom: var(--space-xs);
}

.stat-card .stat-label {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.9);
}

/* Search Section */
.search-section {
    margin-bottom: var(--space-2xl);
}

.search-container {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space);
    border: 1px solid var(--border);
}

.search-bar {
    display: flex;
    gap: var(--space);
    align-items: center;
}

.search-bar input {
    flex: 1;
    padding: 1rem;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 1rem;
}

.advanced-search {
    display: none;
    margin-top: var(--space);
    padding-top: var(--space);
    border-top: 1px solid var(--border);
}

.advanced-filters {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space);
    margin-bottom: var(--space);
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.filter-group label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 600;
}

.filter-select {
    padding: 0.5rem;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-primary);
}

.filter-actions {
    display: flex;
    gap: var(--space);
    justify-content: flex-end;
}

/* Featured Papers */
.featured-section {
    margin-bottom: var(--space-2xl);
}

.featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: var(--space);
    margin-top: var(--space-xl);
}

@media (max-width: 768px) {
    .featured-grid {
        grid-template-columns: 1fr;
    }
}

.featured-paper {
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space);
    border: 1px solid var(--border);
    position: relative;
}

.paper-badges {
    position: absolute;
    top: var(--space);
    right: var(--space);
    display: flex;
    gap: var(--space-xs);
}

.badge {
    padding: 0.25rem 0.5rem;
    border-radius: 50px;
    font-size: 0.75rem;
    font-weight: 600;
}

.badge.new {
    background: rgba(59, 130, 246, 0.2);
    color: #3b82f6;
}

.badge.cited {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
}

.badge.policy {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b;
}

.badge.official {
    background: rgba(139, 92, 246, 0.2);
    color: #8b5cf6;
}

.badge.featured {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.paper-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space);
    margin: var(--space-sm) 0;
    color: var(--text-tertiary);
    font-size: 0.875rem;
}

.paper-abstract {
    color: var(--text-secondary);
    margin: var(--space) 0;
    line-height: 1.6;
}

.paper-metrics {
    display: flex;
    gap: var(--space);
    margin: var(--space) 0;
}

.paper-metrics .metric {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-tertiary);
}

.paper-actions {
    display: flex;
    gap: var(--space-sm);
    margin-top: var(--space);
}

/* Categories */
.categories-section {
    margin-bottom: var(--space-2xl);
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space);
    margin-top: var(--space-xl);
}

.category-card {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
    display: flex;
    gap: var(--space);
    align-items: center;
    cursor: pointer;
    transition: var(--transition);
}

.category-card:hover {
    transform: translateY(-2px);
    border-color: var(--primary);
    background: rgba(0, 107, 63, 0.1);
}

.category-icon {
    width: 48px;
    height: 48px;
    background: var(--primary);
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
}

.category-content {
    flex: 1;
}

.category-count {
    font-size: 0.875rem;
    color: var(--secondary);
    font-weight: 600;
    margin: var(--space-xs) 0;
}

.category-desc {
    font-size: 0.875rem;
    color: var(--text-tertiary);
}

/* Papers Grid/List */
.papers-section {
    margin-bottom: var(--space-2xl);
}

.section-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space);
}

.results-count {
    color: var(--text-tertiary);
    font-size: 0.875rem;
}

.view-select {
    padding: 0.5rem;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-primary);
}

.papers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space);
    margin-bottom: var(--space-xl);
}

.papers-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.paper-card {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
    transition: var(--transition);
}

.paper-card:hover {
    transform: translateY(-2px);
    border-color: var(--primary);
    box-shadow: var(--shadow-lg);
}

.paper-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space);
}

.paper-access {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 50px;
}

.paper-access.open {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
}

.paper-access.restricted {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.paper-title {
    font-size: 1.1rem;
    margin-bottom: var(--space-sm);
    line-height: 1.4;
}

.paper-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
    margin: var(--space) 0;
}

.paper-tags .tag {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    background: var(--bg-tertiary);
    border-radius: 50px;
    color: var(--text-tertiary);
}

/* List view */
.paper-list-item {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space);
    cursor: pointer;
    transition: var(--transition);
}

.paper-list-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.list-left {
    flex: 1;
}

.list-header {
    display: flex;
    gap: var(--space-sm);
    margin-bottom: var(--space-xs);
}

.list-right {
    display: flex;
    flex-direction: column;
    gap: var(--space);
    align-items: flex-end;
}

/* No results */
.no-results {
    grid-column: 1 / -1;
    text-align: center;
    padding: var(--space-2xl);
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 2px dashed var(--border);
}

.no-results i {
    font-size: 3rem;
    color: var(--text-tertiary);
    margin-bottom: var(--space);
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: center;
    gap: var(--space-xs);
    margin-top: var(--space-xl);
}

.page-btn {
    padding: 0.5rem 1rem;
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-secondary);
    cursor: pointer;
    transition: var(--transition);
}

.page-btn:hover:not(:disabled) {
    background: var(--bg-secondary);
}

.page-btn.active {
    background: var(--primary);
    color: white;
    border-color: transparent;
}

.page-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.page-dots {
    padding: 0.5rem 1rem;
    color: var(--text-tertiary);
}

/* Institutions */
.institutions-section {
    margin-bottom: var(--space-2xl);
}

.institutions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space);
    margin-top: var(--space-xl);
}

.institution-card {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
}

.institution-logo {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space);
    color: white;
    font-size: 1.5rem;
}

.institution-dept {
    color: var(--text-tertiary);
    font-size: 0.875rem;
    margin: var(--space-xs) 0;
}

.institution-desc {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-bottom: var(--space);
}

.institution-stats {
    display: flex;
    gap: var(--space);
}

.institution-stats .stat {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    background: var(--bg-tertiary);
    border-radius: 50px;
    color: var(--text-tertiary);
}

/* Submit Section */
.submit-section {
    margin-bottom: var(--space-2xl);
}

.submit-container {
    background: linear-gradient(135deg, var(--primary), #00704a);
    border-radius: var(--radius-xl);
    padding: var(--space-2xl);
    color: white;
}

.submit-content {
    display: flex;
    align-items: center;
    gap: var(--space-xl);
}

@media (max-width: 768px) {
    .submit-content {
        flex-direction: column;
        text-align: center;
    }
}

.submit-icon {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    flex-shrink: 0;
}

.submit-text {
    flex: 1;
}

.submit-benefits {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space);
    margin: var(--space) 0;
}

.benefit {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.submit-actions {
    display: flex;
    gap: var(--space);
}

/* Citation Section */
.citation-section {
    margin-bottom: var(--space-2xl);
}

.citation-tools {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space);
    margin-bottom: var(--space-xl);
}

.citation-format {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
}

.citation-example {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--space);
    margin: var(--space) 0;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
}

.citation-generator {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
}

.generator-form {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space);
    margin: var(--space) 0;
}

.form-group input {
    width: 100%;
    padding: 0.75rem;
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-primary);
}

.generator-output {
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    padding: var(--space);
    margin-top: var(--space);
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
}

.citation-result {
    margin-bottom: var(--space-sm);
}

/* Metrics Section */
.metrics-section {
    margin-bottom: var(--space-2xl);
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space);
    margin-bottom: var(--space-xl);
}

.metric-card {
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
    text-align: center;
}

.metric-card .metric-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--secondary);
    margin: var(--space-xs) 0;
}

.metric-card .metric-label {
    color: var(--text-tertiary);
    margin-bottom: var(--space-xs);
}

.metric-change {
    font-size: 0.875rem;
    font-weight: 600;
}

.metric-change.positive {
    color: #10b981;
}

.metric-change.negative {
    color: #ef4444;
}

.metric-change.neutral {
    color: #f59e0b;
}

.metrics-chart {
    height: 300px;
    background: var(--bg-secondary);
    border-radius: var(--radius);
    padding: var(--space);
    border: 1px solid var(--border);
}

/* Modals */
.citation-modal,
.paper-modal,
.submit-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    animation: fadeIn 0.3s ease;
}

.modal-content {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    width: 90%;
    max-width: 800px;
    max-height: 90vh;
    overflow-y: auto;
    animation: slideUp 0.3s ease;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space);
    border-bottom: 1px solid var(--border);
}

.modal-close {
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-body {
    padding: var(--space);
}

.modal-footer {
    padding: var(--space);
    border-top: 1px solid var(--border);
    display: flex;
    gap: var(--space);
    justify-content: flex-end;
}

.paper-details .detail-section {
    margin-bottom: var(--space);
}

.paper-details .detail-section h4 {
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
    font-size: 1rem;
}

.email-address {
    font-family: 'Courier New', monospace;
    background: var(--bg-secondary);
    padding: var(--space-sm);
    border-radius: var(--radius);
    margin: var(--space) 0;
}

.requirements ul {
    list-style: none;
    padding-left: 0;
}

.requirements li {
    padding: 0.25rem 0;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.requirements li:before {
    content: 'â€¢';
    color: var(--primary);
    font-weight: bold;
}

/* Notifications */
.research-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    animation: slideIn 0.3s ease;
}

.research-notification.success {
    border-left: 4px solid #10b981;
}

.research-notification.error {
    border-left: 4px solid #ef4444;
}

.research-notification.info {
    border-left: 4px solid #3b82f6;
}

.research-notification.fade-out {
    animation: slideOut 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}

.mt-2 {
    margin-top: 0.5rem;
}
</style>
</body>
</html>
